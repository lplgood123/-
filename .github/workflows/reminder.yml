name: åƒè¯æé†’

on:
  schedule:
    - cron: '0 0 * * *'    # 08:00 åŒ—äº¬æ—¶é—´
    - cron: '30 1 * * *'   # 09:30 åŒ—äº¬æ—¶é—´
    - cron: '30 10 * * *'  # 18:30 åŒ—äº¬æ—¶é—´
    - cron: '30 14 * * *'  # 22:30 åŒ—äº¬æ—¶é—´
  workflow_dispatch:

jobs:
  remind:
    runs-on: ubuntu-latest
    steps:
      - name: æ—©ä¸Š8ç‚¹æé†’ï¼ˆæŸ¥è¡¨è·å–ä¼˜ç”²ä¹å‰‚é‡ï¼‰
        if: github.event.schedule == '0 0 * * *' || github.event_name == 'workflow_dispatch'
        run: |
          python3 << 'EOF'
          import urllib.request
          import json
          import datetime
          import os
          
          # è·å–ä»Šå¤©çš„æ—¥æœŸ
          today = datetime.datetime.now()
          day_of_year = (today - datetime.datetime(2026, 2, 12)).days
          is_even = day_of_year % 2 == 0
          dose = "ğŸ’Š 1ç‰‡" if is_even else "ğŸ”ª åŠç‰‡"
          
          message = f"â° ã€æ—©ä¸Š8ç‚¹ - ç©ºè…¹æœè¯ã€‘\\n{dose} ä¼˜ç”²ä¹\\nğŸ’Š å®‰çªå¦ å¡1ç²’\\n\\n@LiPeilin è®°å¾—ç©ºè…¹åƒè¯å“¦ï¼"
          
          data = json.dumps({
              "msg_type": "text",
              "content": {"text": message}
          }).encode()
          
          webhook = "https://open.feishu.cn/open-apis/bot/v2/hook/2cf4fade-f78e-4387-99ab-293745ca28c1"
          req = urllib.request.Request(webhook, data=data, headers={'Content-Type': 'application/json'})
          urllib.request.urlopen(req)
          print(f"Sent: {message}")
          EOF          
      
      - name: æ—©ä¸Š9ç‚¹åŠæé†’
        if: github.event.schedule == '30 1 * * *'
        run: |
          python3 << 'EOF'
          import urllib.request
          import json
          
          message = "â° ã€æ—©ä¸Š9ç‚¹åŠ - é¥­åæœè¯ã€‘\\nğŸ’Š çˆ±ä¹ç»´ 1ç²’\\nğŸ’Š ç»´ç”Ÿç´ D 5ç²’\\nğŸ’Š DHA 2ç²’\\nğŸ’Š å…ç–«çƒè›‹ç™½ 2ç²’\\nğŸ’Š åœ°å±ˆå­•é…® 2ç²’\\nğŸ’Š å°çº¢ç‰‡ 1ç‰‡\\n\\n@LiPeilin é¥­åè¯åˆ«å¿˜äº†ï¼"
          
          data = json.dumps({
              "msg_type": "text",
              "content": {"text": message}
          }).encode()
          
          webhook = "https://open.feishu.cn/open-apis/bot/v2/hook/2cf4fade-f78e-4387-99ab-293745ca28c1"
          req = urllib.request.Request(webhook, data=data, headers={'Content-Type': 'application/json'})
          urllib.request.urlopen(req)
          EOF          
      
      - name: æ™šä¸Š6ç‚¹åŠæé†’
        if: github.event.schedule == '30 10 * * *'
        run: |
          python3 << 'EOF'
          import urllib.request
          import json
          
          message = "â° ã€æ™šä¸Š6ç‚¹åŠ - æ™šé¥­åæœè¯ã€‘\\nğŸ’Š åœ°å±ˆå­•é…® 2ç‰‡\\nğŸ’Š è¡¥ä½³ä¹ 1ç‰‡\\nğŸ’Š å°çº¢ç‰‡ 1ç‰‡\\n\\n@LiPeilin æ™šé¥­åè®°å¾—åƒè¯ï¼"
          
          data = json.dumps({
              "msg_type": "text",
              "content": {"text": message}
          }).encode()
          
          webhook = "https://open.feishu.cn/open-apis/bot/v2/hook/2cf4fade-f78e-4387-99ab-293745ca28c1"
          req = urllib.request.Request(webhook, data=data, headers={'Content-Type': 'application/json'})
          urllib.request.urlopen(req)
          EOF          
      
      - name: æ™šä¸Š10ç‚¹åŠæé†’
        if: github.event.schedule == '30 14 * * *'
        run: |
          python3 << 'EOF'
          import urllib.request
          import json
          
          message = "â° ã€æ™šä¸Š10ç‚¹åŠ - ç¡å‰æœè¯ã€‘\\nğŸ’Š å®‰çªå¦ å¡1ç²’\\n\\n@LiPeilin ç¡å‰è¯åˆ«å¿˜å•¦ï¼Œæ™šå®‰ï½"
          
          data = json.dumps({
              "msg_type": "text",
              "content": {"text": message}
          }).encode()
          
          webhook = "https://open.feishu.cn/open-apis/bot/v2/hook/2cf4fade-f78e-4387-99ab-293745ca28c1"
          req = urllib.request.Request(webhook, data=data, headers={'Content-Type': 'application/json'})
          urllib.request.urlopen(req)
          EOF          
